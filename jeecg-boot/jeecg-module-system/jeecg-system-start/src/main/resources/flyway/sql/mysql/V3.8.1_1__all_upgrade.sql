-- -- author:sunjianlei---date:20250417--for: 【QQYUN-11093】【online】Add toOnlineReport、OnlineTenants of the chartIDField
ALTER TABLE `onl_cgreport_head`
    ADD COLUMN `tenant_id` int NULL DEFAULT 0 COMMENT 'tenantID' AFTER `content`;

-- ---author:chenrui-date:20250418-----for: Add toAIprocess:积木ReportAIengine
INSERT INTO `airag_flow` (`id`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `tenant_id`, `application_name`, `name`, `descr`, `icon`, `chain`, `design`, `status`, `metadata`) VALUES ('1909856345692065793', 'jeecg', '2025-04-09 14:30:11', 'jeecg', '2025-04-17 20:32:02', 'A04', NULL, 'jeecg', 'JimuReport AIengine', '', '', 'THEN(\n    start.tag(\'start-node\'),\n    SWITCH(switch.tag(\'173365501230346240\')).to(\n        THEN(\n            llm.tag(\'172956395755208704\'),\n            end.tag(\'172957153284259840\')\n        ).tag(\"172956395755208704\"),\n        THEN(\n            llm.tag(\'173365800833675264\'),\n            end.tag(\'173366253646540800\')\n        ).tag(\"173365800833675264\"),\n        end.tag(\'173366439085109248\'),\n        THEN(\n            llm.tag(\'175149164433014784\'),\n            end.tag(\'175153953988444160\')\n        ).tag(\"175149164433014784\"),\n        THEN(\n            llm.tag(\'175505963485245440\'),\n            end.tag(\'175506006644633600\')\n        ).tag(\"175505963485245440\"),\n        THEN(\n            llm.tag(\'175807569594040320\'),\n            end.tag(\'175808663015538688\')\n        ).tag(\"175807569594040320\")\n    ).tag(\'173365501230346240\')\n).tag(\"start-node\")', '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":262,\"y\":458,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"content\",\"name\":\"User issues\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":true},{\"field\":\"ddl\",\"name\":\"table structure\",\"type\":\"string\",\"required\":true},{\"field\":\"dbtype\",\"name\":\"Database type\",\"type\":\"string\",\"required\":true},{\"field\":\"bizType\",\"name\":\"Business type\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"172956395755208704\",\"type\":\"llm\",\"x\":1166,\"y\":160,\"properties\":{\"text\":\"generatesql\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"Qianwencoder\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"# Role：SQLgenerate助手\\nyou are a professionalSQLstatementgenerate工具，能够根据用户提供的describeandtable structure自动generate高效的SQLquery statement。\\n\\n## Target：\\n- 根据用户的describegenerate准确的SQLquery statement。\\n\\n## Skill：\\n1. 理解用户提供的needandtable structure。\\n2. Automatically build conformingSQLgrammar的query statement。\\n3. 优化generate的SQLto improve execution efficiency。\\n\\n## Workflow：\\n1. 接收用户describeandtable structure信息。\\n2. Analyze user needs，Determine what is neededSQLOperation type（Such as query、insert、renew、delete）。\\n3. 根据分析结果generate相应的SQLstatement。\\n\\n## Output format：\\n- generate的SQLstatement应for标准Format，like：SELECT * FROM table_name ;\\n- will be outputSQLstatementFormat化\\n- Output onlysqlstatement，No extra explanation，don't wantmdgrammar，don't want换OK符，don't want有sqlComment。\\n\\n## limit：\\n\\n- unless explicitly stated，otherwisedon't wantgenerate查询条件\\n- make suregenerate的SQLstatement符合data库的grammarRequire，make suresqlCan be executed directly。\\n- make sureFieldand表能正确correspond。\"},{\"role\":\"user\",\"content\":\"table structure：\\n{{ddl}}\\n---------\\nDatabase type：\\n{{dbtype}}\\n----------\\nneed：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"},{\"field\":\"dbtype\",\"name\":\"dbtype\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"172957153284259840\",\"type\":\"end\",\"x\":1643,\"y\":129,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"sql\",\"nodeId\":\"172956395755208704\"}],\"height\":114,\"width\":332}},{\"id\":\"173365501230346240\",\"type\":\"switch\",\"x\":688,\"y\":536,\"properties\":{\"text\":\"conditional branch\",\"options\":{\"if\":[{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genSql\"}],\"next\":\"172956395755208704\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genJsonRows\"}],\"next\":\"173365800833675264\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"chooseTables\"}],\"next\":\"175149164433014784\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genChart\"}],\"next\":\"175505963485245440\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"intentCheck\"}],\"next\":\"175807569594040320\"}],\"else\":{\"next\":\"173366439085109248\"}},\"inputParams\":[],\"outputParams\":[{\"field\":\"index\",\"name\":\"branch index\",\"type\":\"number\"}],\"height\":222,\"width\":332}},{\"id\":\"173365800833675264\",\"type\":\"llm\",\"x\":1167,\"y\":368,\"properties\":{\"text\":\"generaterows\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"Qianwencoder\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"根据以下data以及用户needgenerate符合Require的表格data结构。\\n\\n\\n## 工作process：\\n\\n\\n1. 根据用户need选择一个合适的data集\\n2. 根据data集andneed，generate表格data。\\n2. final outputjson\\n\\n\\n## Dataset format description：\\n```\\n{\\n  \\\"code\\\": \\\"a\\\",\\n  \\\"title\\\": \\\"a\\\",\\n  \\\"isList\\\": \\\"1\\\",\\n  \\\"children\\\": [\\n    {\\n      \\\"title\\\": \\\"total_sales\\\",\\n      \\\"fieldText\\\": \\\"total sales\\\"\\n    },\\n    {\\n      \\\"title\\\": \\\"total_returns\\\",\\n      \\\"fieldText\\\": \\\"Total returned quantity\\\"\\n    }\\n  ]\\n}\\n```\\n* code：Data set variable name\\n* isList：for”1”represents a set，“0”Represent object\\n* children：forFieldList表，Includetitle（Field名）andfieldText（display name）\\n⸻\\n## Table data structure description：\\n```\\n{\\n  \\\"0\\\": { \\\"cells\\\": {} }, // OK号作for键\\n  \\\"1\\\": { \\\"cells\\\": { // Under each line there is cells object，key It's the serial number\\n      \\\"1\\\": { \\\"text\\\": \\\"#{a.total_sales}\\\" },\\n      \\\"2\\\": { \\\"text\\\": \\\"#{a.name}\\\" }\\n  }},\\n  \\\"len\\\": 200 // Total number of rows in the table（可固定for200）\\n}\\n```\\n* 每OK以序号作for键\\n* 每List下Include text for占位符，${} 用于object，#{} for collection\\n* 可Include style and other additional style information\\n⸻\\n\\n\\n## Filling rules：\\n1. like isList = 1（gather）：\\n  * No.NOK（like \\\"0\\\"）forField标题：use children.fieldText filling\\n  * No.N+1OK（like \\\"1\\\"）forField占位符：use `#{code.title}` filling\\n  * 所有Field占位符占用一OK，所有标题占用一OK\\n2. like isList = 0（object）：\\n  * 每Field占两List，LowNList填Field标题，N+1column fill placeholder `${code.title}`\\n  * Two groups in total：No.一组在No.nList，No.二组在No.N+2List\\n\\n\\n⸻\\n\\n\\n## Output format\\n* Return directlyJSONdata，don't want解释，don't wantmdgrammar，don't want换OK符，don't want有Comment。\\n\\n\\n\\n\\n## special attention\\n- Field的占位必须是`#{}`or`${}`，Curly braces cannot be missing。\\n- The serial number of the user description needs to be subtracted by one to be the subscript.\\n- make sureoutput的jsonCorrect format。\\n- 只需要generate一套表格data。\"},{\"role\":\"user\",\"content\":\"用户data集：\\n{{ddl}}\\n用户need：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"173366253646540800\",\"type\":\"end\",\"x\":1643,\"y\":336,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"rows\",\"nodeId\":\"173365800833675264\"}],\"height\":114,\"width\":332}},{\"id\":\"173366439085109248\",\"type\":\"end\",\"x\":1158,\"y\":1220,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":true,\"outputContent\":\"error:选择正确的Business type\"},\"inputParams\":[],\"outputParams\":[],\"height\":136,\"width\":332}},{\"id\":\"175149164433014784\",\"type\":\"llm\",\"x\":1164,\"y\":598,\"properties\":{\"text\":\"Select table\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"Qianwencoder\",\"temperature\":0.7}},\"history\":2,\"messages\":[{\"role\":\"system\",\"content\":\"## Task\\n根据用户need，从下方data库表List表中选择所有关联的table name称。\\n\\n\\n## data库表List表（Format：table name | Comment）\\n{{ddl}}\\n\\n## Output rules\\n1. Strictly pressJSON数组Formatoutput，例like：[\\\"order\\\"]。\\n2. 仅Includetable name称，无需Comment。\\n3. **禁止Add toList表外的表**。\\n4. The selection range of the table can be appropriately larger。\\n4. Outputs an empty array when there is no business relevance：[]\\n\\n\\nPlease reply pureJSON，don't wantInclude其他content。\"},{\"role\":\"user\",\"content\":\"用户need：{{question}}\"}]},\"inputParams\":[{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"},{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"175153953988444160\",\"type\":\"end\",\"x\":1643,\"y\":564,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"tables\",\"nodeId\":\"175149164433014784\"}],\"height\":114,\"width\":332}},{\"id\":\"175505963485245440\",\"type\":\"llm\",\"x\":1166,\"y\":802,\"properties\":{\"text\":\"generate图表\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"Qianwencoder\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"根据以下data以及用户needgenerate符合FormatRequire的图表data。\\n\\n\\n## 工作process：\\n\\n\\n1. 根据用户need选择一个合适的data集\\n2. 根据data集andneed，从图表List表中选择一个合适的图标类型。\\n3. 组装final output的json\\n\\n\\n⸻\\n## Optional的图表like下（logo|describe）：\\n\\n\\n- 1Dimensional chart\\n    - bar.simple|Ordinary column chart\\n    - bar.background|Column chart with background\\n    - bar.horizontal|horizontal column chart\\n    - line.simple|Ordinary line chart\\n    - line.area|Area stacked line chart\\n    - line.smooth|Smooth Curve Line Chart\\n    - line.step|Stepped Line Chart\\n    - pie.simple|Ordinary pie chart\\n    - pie.doughnut|donut pie chart\\n    - pie.rose|Nightingale Rose Pie Chart\\n    - scatter.simple|Ordinary scatter plot\\n    - funnel.simple|Ordinary funnel chart\\n    - funnel.pyramid|Pyramid Funnel Chart\\n    - pictorial.spirits|common pictogram\\n    - map.scatter|click map\\n    - gauge.simple|360°Dashboard\\n    - gauge.simple180|180°Dashboard\\n- 2dimension\\n    - bar.multi|多data对比柱形图\\n    - bar.negative|Positive and negative bar graph\\n    - bar.stack|stacked column chart\\n    - bar.stack.horizontal|stacked bar chart\\n    - bar.multi.horizontal|多data条形柱状图\\n    - line.multi|多data对比折线图\\n    - mixed.linebar|Ordinary column chart\\n    - scatter.bubble|bubble scatter plot\\n    - radar.basic|Ordinary radar chart\\n    - radar.custom|circular radar chart\\n⸻\\n## Dataset format description：\\n```\\n{\\n  \\\"dbId\\\": \\\"1069915169263800320\\\",\\n  \\\"code\\\": \\\"a\\\",\\n  \\\"title\\\": \\\"a\\\",\\n  \\\"isList\\\": \\\"1\\\",\\n  \\\"type\\\": \\\"0\\\",\\n  \\\"children\\\": [\\n    {\\n      \\\"title\\\": \\\"total_sales\\\",\\n      \\\"fieldText\\\": \\\"total_sales\\\"\\n    },\\n    {\\n      \\\"title\\\": \\\"total_returns\\\",\\n      \\\"fieldText\\\": \\\"total_returns\\\"\\n    }\\n  ]\\n}\\n```\\n* code：Data set variable name\\n* isList：for”1”represents a set，“0”Represent object\\n* children：forFieldList表，Includetitle（Field名）andfieldText（display name）\\n* type：0|sql,1|api,2|code,3|json\\n⸻\\n## outputjsonFormat\\n{\\n    \\\"dataType\\\": \\\"sql\\\",\\n    \\\"apiStatus\\\": \\\"0\\\",\\n    \\\"apiUrl\\\": \\\"\\\",\\n    \\\"dataId\\\": \\\"1069898455939633152\\\",\\n    \\\"axisX\\\": \\\"supplier_name\\\",\\n    \\\"axisY\\\": \\\"total_returns\\\",\\n    \\\"series\\\": \\\"material_name\\\",\\n    \\\"yText\\\": \\\"total_returns\\\",\\n    \\\"xText\\\": \\\"supplier_name\\\",\\n    \\\"dbCode\\\": \\\"a\\\",\\n    \\\"isCustomPropName\\\": false,\\n    \\\"chartType\\\": \\\"line.multi\\\",\\n    \\\"id\\\": \\\"0aGl4PUfbIfy8BMF\\\",\\n    \\\"run\\\": 1,\\n    \\\"title\\\": \\\"\\\",\\n}\\n* dataType：与data集typecorrespond(0|sql,1|api,2|code,3|json)\\n* dataId：corresponddata集dbId\\n* dbCode：corresponddata集的code\\n* axisX：Classification attributes，从data集Field中取值（fieldText)\\n* axisY：value attribute，从data集Field中取值（fieldText)\\n* series: 系List，从data集Field中取值（fieldText）\\n* xText：Classification attributes显示，从data集Field中取值（title)\\n* yText：value attribute显示，从data集Field中取值（title)\\n* chartType：图表的logo\\n* title：for这个图表起一个标题\\n* isCustomPropName: like果是apidata集,该值fortrue\\n* apiStatus: like果是apidata集则等于\\\"1\\\"，otherwise\\\"0\\\"\\n\\n\\n## Output format\\n* Return directlyJSONdata，don't want解释，don't wantmdgrammar，don't want换OK符，don't want有Comment。\\n* make sureoutput的jsonCorrect format完整。\"},{\"role\":\"user\",\"content\":\"## 用户data集：\\n{{ddl}}\\n## 用户need：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"},{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"175506006644633600\",\"type\":\"end\",\"x\":1643,\"y\":769,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"chart\",\"nodeId\":\"175505963485245440\"}],\"height\":114,\"width\":332}},{\"id\":\"175807569594040320\",\"type\":\"llm\",\"x\":1166,\"y\":1018,\"properties\":{\"text\":\"Intent recognition\",\"options\":{\"model\":{\"modeId\":\"1897835602959695874\",\"params\":{\"model\":\"qwen-max\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"请根据用户need与data集设计，综合判断应执OK的Workflow步骤，并for每个步骤generate简洁明确的needdescribe，同时选择最合适的data集。\\n\\n\\n---\\n\\n\\n## Optional steps（Format：logo | Function description）\\n\\n\\n- `genJsonRows` | generateReport（Optional）  \\n- `genChart` | generate图表（Optional）  \\n\\n\\n> **Notice：** Select at least one step，You can also choose both at the same time。\\n\\n\\n---\\n\\n\\n## data集Format\\n\\n\\n```json\\n{\\n  \\\"dbId\\\": \\\"1069915169263800320\\\",\\n  \\\"code\\\": \\\"a\\\",\\n  \\\"title\\\": \\\"a\\\",\\n  \\\"isList\\\": \\\"1\\\",\\n  \\\"type\\\": \\\"0\\\",\\n  \\\"children\\\": [\\n    {\\n      \\\"title\\\": \\\"total_sales\\\",\\n      \\\"fieldText\\\": \\\"total_sales\\\"\\n    },\\n    {\\n      \\\"title\\\": \\\"total_returns\\\",\\n      \\\"fieldText\\\": \\\"total_returns\\\"\\n    }\\n  ]\\n}\\n* code：Data set variable name\\n* isList：for”1”represents a set，“0”Represent object\\n* children：forFieldList表，Includetitle（display name）andfieldText（Field名）\\n* type：0|sql,1|api,2|code,3|json\\n\\n\\n⸻\\n## Output format\\n\\n\\n```\\n步骤logo1|needdescribe1|data集code,步骤logo2|needdescribe2|data集code\\n```\\n\\n\\n* Use commas between steps,separate\\n* 不得Add to额外说明，don't wantmdgrammar，don't want换OK符，don't want有Comment。\"},{\"role\":\"user\",\"content\":\"## 用户data集：\\n{{ddl}}\\n## 用户need：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"175808663015538688\",\"type\":\"end\",\"x\":1643,\"y\":985,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"intent\",\"nodeId\":\"175807569594040320\"}],\"height\":114,\"width\":332}}],\"edges\":[{\"id\":\"172957153288454144\",\"type\":\"base-edge\",\"sourceNodeId\":\"172956395755208704\",\"targetNodeId\":\"172957153284259840\",\"sourceAnchorId\":\"172956395755208704_output\",\"targetAnchorId\":\"172957153284259840_input\",\"pointsList\":[{\"x\":1332,\"y\":101},{\"x\":1432,\"y\":101},{\"x\":1377,\"y\":103},{\"x\":1477,\"y\":103}]},{\"id\":\"173365501234540544\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"173365501230346240\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"173365501230346240_input\",\"pointsList\":[{\"x\":428,\"y\":443},{\"x\":528,\"y\":443},{\"x\":422,\"y\":456},{\"x\":522,\"y\":456}]},{\"id\":\"173366253650735104\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365800833675264\",\"targetNodeId\":\"173366253646540800\",\"sourceAnchorId\":\"173365800833675264_output\",\"targetAnchorId\":\"173366253646540800_input\",\"pointsList\":[{\"x\":1333,\"y\":309},{\"x\":1433,\"y\":309},{\"x\":1377,\"y\":310},{\"x\":1477,\"y\":310}]},{\"id\":\"173372961415852032\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"172956395755208704\",\"sourceAnchorId\":\"173365501230346240_source_if\",\"targetAnchorId\":\"172956395755208704_input\",\"pointsList\":[{\"x\":854,\"y\":490},{\"x\":954,\"y\":490},{\"x\":900,\"y\":101},{\"x\":1000,\"y\":101}]},{\"id\":\"173372967073968128\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"173365800833675264\",\"sourceAnchorId\":\"173365501230346240_case_2\",\"targetAnchorId\":\"173365800833675264_input\",\"pointsList\":[{\"x\":854,\"y\":516},{\"x\":954,\"y\":516},{\"x\":901,\"y\":309},{\"x\":1001,\"y\":309}]},{\"id\":\"173372974988619776\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"173366439085109248\",\"sourceAnchorId\":\"173365501230346240_source_else\",\"targetAnchorId\":\"173366439085109248_input\",\"pointsList\":[{\"x\":854,\"y\":620},{\"x\":954,\"y\":620},{\"x\":892,\"y\":1183},{\"x\":992,\"y\":1183}]},{\"id\":\"175149164437209088\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"175149164433014784\",\"sourceAnchorId\":\"173365501230346240_case_3\",\"targetAnchorId\":\"175149164433014784_input\",\"pointsList\":[{\"x\":854,\"y\":542},{\"x\":954,\"y\":542},{\"x\":898,\"y\":539},{\"x\":998,\"y\":539}]},{\"id\":\"175153997969915904\",\"type\":\"base-edge\",\"sourceNodeId\":\"175149164433014784\",\"targetNodeId\":\"175153953988444160\",\"sourceAnchorId\":\"175149164433014784_output\",\"targetAnchorId\":\"175153953988444160_input\",\"pointsList\":[{\"x\":1330,\"y\":539},{\"x\":1430,\"y\":539},{\"x\":1377,\"y\":538},{\"x\":1477,\"y\":538}]},{\"id\":\"175505963489439744\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"175505963485245440\",\"sourceAnchorId\":\"173365501230346240_case_4\",\"targetAnchorId\":\"175505963485245440_input\",\"pointsList\":[{\"x\":854,\"y\":568},{\"x\":954,\"y\":568},{\"x\":900,\"y\":743},{\"x\":1000,\"y\":743}]},{\"id\":\"175506006648827904\",\"type\":\"base-edge\",\"sourceNodeId\":\"175505963485245440\",\"targetNodeId\":\"175506006644633600\",\"sourceAnchorId\":\"175505963485245440_output\",\"targetAnchorId\":\"175506006644633600_input\",\"pointsList\":[{\"x\":1332,\"y\":743},{\"x\":1432,\"y\":743},{\"x\":1377,\"y\":743},{\"x\":1477,\"y\":743}]},{\"id\":\"175807569598234624\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"175807569594040320\",\"sourceAnchorId\":\"173365501230346240_case_5\",\"targetAnchorId\":\"175807569594040320_input\",\"pointsList\":[{\"x\":854,\"y\":594},{\"x\":954,\"y\":594},{\"x\":900,\"y\":959},{\"x\":1000,\"y\":959}]},{\"id\":\"175808663019732992\",\"type\":\"base-edge\",\"sourceNodeId\":\"175807569594040320\",\"targetNodeId\":\"175808663015538688\",\"sourceAnchorId\":\"175807569594040320_output\",\"targetAnchorId\":\"175808663015538688_input\",\"pointsList\":[{\"x\":1332,\"y\":959},{\"x\":1432,\"y\":959},{\"x\":1377,\"y\":959},{\"x\":1477,\"y\":959}]}]}', 'enable', '{\"outputs\":[{\"field\":\"text\",\"name\":\"intent\",\"nodeId\":\"175807569594040320\"},{\"field\":\"outputText\",\"type\":\"string\"}],\"inputs\":[{\"field\":\"content\",\"name\":\"User issues\",\"type\":\"string\"},{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\"},{\"field\":\"ddl\",\"name\":\"table structure\",\"type\":\"string\"},{\"field\":\"dbtype\",\"name\":\"Database type\",\"type\":\"string\"},{\"field\":\"bizType\",\"name\":\"Business type\",\"type\":\"string\"}]}');

-- ---author:wangshuai-date:20250418-----for: Add toocrIdentify examples menu
INSERT INTO sys_permission (id, parent_id, name, url, component, is_route, component_name, redirect, menu_type, perms, perms_type, sort_no, always_show, icon, is_leaf, keep_alive, hidden, hide_tab, description, create_by, create_time, update_by, update_time, del_flag, rule_flag, status, internal_or_external) VALUES ('1912753560201089025', '1438108178010202113', 'OCRidentify', '/ai/ocr', 'super/airag/ocr/AiOcrList', 1, '', NULL, 1, NULL, '0', 1.00, 0, 'ant-design:scan-outlined', 1, 0, 0, 0, NULL, 'admin', '2025-04-17 14:22:41', 'admin', '2025-04-18 10:07:40', 0, 0, NULL, 0);

-- ---author:chenrui-date:20250424-----for: 修改Exampleprocess入参,delete多余的入参
UPDATE `airag_flow` SET `create_by` = 'admin', `create_time` = '2025-02-19 20:13:03', `update_by` = 'jeecg', `update_time` = '2025-04-24 12:25:08', `sys_org_code` = 'A04', `tenant_id` = NULL, `application_name` = 'jeecg', `name` = 'Example_conditional branch', `descr` = NULL, `icon` = NULL, `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    SWITCH(switch.tag(\'a448577f-9824-415b-97f6-72543fcb619d\')).to(\n        end.tag(\'91a7df56-107c-4f83-b1e4-b1b7e392c4e3\'),\n        end.tag(\'162160595291774976\')\n    ).tag(\'a448577f-9824-415b-97f6-72543fcb619d\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":515,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":false},{\"field\":\"content\",\"name\":\"User issues\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"a448577f-9824-415b-97f6-72543fcb619d\",\"type\":\"switch\",\"x\":731,\"y\":486,\"properties\":{\"text\":\"conditional branch\",\"options\":{\"if\":[{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"question\",\"operator\":\"CONTAINS\",\"value\":\"jeecg\"}],\"next\":\"162160595291774976\"}],\"else\":{\"next\":\"91a7df56-107c-4f83-b1e4-b1b7e392c4e3\"}},\"inputParams\":[],\"outputParams\":[{\"field\":\"index\",\"name\":\"branch index\",\"type\":\"number\"}],\"width\":332,\"height\":118}},{\"id\":\"91a7df56-107c-4f83-b1e4-b1b7e392c4e3\",\"type\":\"end\",\"x\":1085,\"y\":662,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":true,\"outputContent\":\"{{res}}不Includejeecg\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"question\",\"name\":\"res\",\"nodeId\":\"start-node\"}],\"height\":136,\"width\":332}},{\"id\":\"162160595291774976\",\"type\":\"end\",\"x\":1084,\"y\":361,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":true,\"outputContent\":\"{{res}}Includejeecg\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"question\",\"name\":\"res\",\"nodeId\":\"start-node\"}],\"height\":136,\"width\":332}}],\"edges\":[{\"id\":\"d5124609-d92e-4966-aff8-e220d0d1dbcd\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"a448577f-9824-415b-97f6-72543fcb619d\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"a448577f-9824-415b-97f6-72543fcb619d_input\",\"pointsList\":[{\"x\":466,\"y\":500},{\"x\":566,\"y\":500},{\"x\":465,\"y\":458},{\"x\":565,\"y\":458}]},{\"id\":\"ea3d924a-e4fd-4bb4-bc8a-d1f07119a7eb\",\"type\":\"base-edge\",\"sourceNodeId\":\"a448577f-9824-415b-97f6-72543fcb619d\",\"targetNodeId\":\"91a7df56-107c-4f83-b1e4-b1b7e392c4e3\",\"sourceAnchorId\":\"a448577f-9824-415b-97f6-72543fcb619d_source_else\",\"targetAnchorId\":\"91a7df56-107c-4f83-b1e4-b1b7e392c4e3_input\",\"pointsList\":[{\"x\":897,\"y\":518},{\"x\":997,\"y\":518},{\"x\":819,\"y\":625},{\"x\":919,\"y\":625}]},{\"id\":\"162161801783320576\",\"type\":\"base-edge\",\"sourceNodeId\":\"a448577f-9824-415b-97f6-72543fcb619d\",\"targetNodeId\":\"162160595291774976\",\"sourceAnchorId\":\"a448577f-9824-415b-97f6-72543fcb619d_source_if\",\"targetAnchorId\":\"162160595291774976_input\",\"pointsList\":[{\"x\":897,\"y\":492},{\"x\":997,\"y\":492},{\"x\":818,\"y\":324},{\"x\":918,\"y\":324}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"outputText\",\"type\":\"string\"}],\"inputs\":[{\"field\":\"question\",\"name\":\"User issues\",\"required\":true,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"History\",\"required\":true,\"type\":\"string[]\"},{\"field\":\"content\",\"name\":\"User issues\",\"required\":true,\"type\":\"string\"}]}' WHERE `id` = '1892185624983658497';
UPDATE `airag_flow` SET `create_by` = 'jeecg', `create_time` = '2025-02-21 11:11:36', `update_by` = 'jeecg', `update_time` = '2025-04-24 12:27:02', `sys_org_code` = 'A04', `tenant_id` = NULL, `application_name` = 'jeecg', `name` = 'Example_LLM', `descr` = '', `icon` = NULL, `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    llm.tag(\'e9f3470a-f129-4baf-880a-294d7b3bff93\'),\n    end.tag(\'9eb6f5c7-94a6-421f-aa39-7cfd7cec44f1\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":273,\"y\":419,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":false},{\"field\":\"content\",\"name\":\"User issues\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"e9f3470a-f129-4baf-880a-294d7b3bff93\",\"type\":\"llm\",\"x\":708,\"y\":435,\"properties\":{\"text\":\"llm\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"你将扮演一个人物RoleLi Bai，以下是about这个Role的详细设定，Please structure your answer based on this information。 \\n\\n**Basic information about the character：**\\n- Who are you：Li Bai\\n- personal name：No.一personal name\\n- Origin and context：Li Bai出生于安西都护府碎叶城（Near present-day Tokmak city in Kyrgyzstan），When he was five years old, he moved to Changlong County, Mianzhou with his father.（Today's Jiangyou, Sichuan）。He was born into a wealthy businessman family，Well-off family，Receive good education since childhood，Browsing through the books of various schools of thought，Demonstrate extremely high literary talent and talent，And likes swordsmanship，Have great ambitions，Determined to make achievements in both politics and literature，A lifelong desire to become an official and serve the country，But it has gone through ups and downs，Ups and downs in career，Finally, he spent his legendary life in poetry, wine and travel.。\\n**Character traits：**\\n- Bold and unrestrained：He is not bound by secular ethics，OK事洒脱，Often show off to others in a wild manner，Drinking and having fun，splash ink，Show your free and unrestrained temperament。例like “I am a madman，Feng Ge laughs at Confucius”，Dare to express one's uninhibited attitude towards traditional concepts。\\n- Confident and open-minded：Believe in your talents and abilities，Always be open-minded when facing difficulties and setbacks。picture “I am born with talents that will be useful，I'll come back after all my money is gone”，Even if you encounter difficulties in your career、poor life，Still confident in the future。\\n- Emphasis on love and justice：value friendship，与众多友人诗酒唱and，True feelings will also be revealed when parting with friends，like “Peach Blossom Pond is a thousand feet deep，Not as good as Wang Lun’s love for me”，Describe the reluctance and gratitude to friends with affectionate strokes。\\n- romantic free and easy：充满天马OK空的想象，There are many descriptions of the fairy world in his poems、Fantasy natural depictions，Pursue spiritual freedom and detachment，like “Flying down three thousand feet，It is suspected that the Milky Way has set for nine days” Such poems full of fantasy and magnificent imagination are the portrayal of his romantic temperament.。\\n**language style：**\\n- Imaginative and exaggerated：Often depict things with exaggerated strokes，Create a strong artistic appeal and shock，Make readers feel as if they are actually there。like “Three thousand feet of white hair，Sadness is like a long one”，Use the extremely exaggerated length of white hair to describe the depth of sadness。 \\n- The language is beautiful and natural and fluent：Precise and gorgeous wording，But there is no sense of carving，诗句likeOK云流水般自然，Read catchy，Both musical and rhythmic。picture “An old friend bids farewell to the Yellow Crane Tower in the West，Fireworks in Yangzhou in March。The lonely sail is far away and the shadow is gone in the blue sky，Only the Yangtze River can be seen flowing in the sky”，Beautiful writing，Far-reaching artistic conception，fast paced。 \\n- Make good use of allusions and metaphors：通过巧妙运用历史典故and形象比喻，Add to the cultural heritage and depth of poetry，Make the poems more implicit and easy to understand。例like “Take some time to fish on the Bixi River，Suddenly I'm riding a boat and dreaming about the sun”，Borrow Jiang Taigong's fishing and Yi Yinmengri's allusions to express his expectations for his official career.。 \\n**interpersonal relationships：**\\n- with Du Fu：Li Baiwith Du Fu堪称唐代诗坛的双子星，The two admire each other，forge a deep friendship。They traveled together，Communicate and learn from each other in poetry creation，杜甫有多首诗表达对Li Bai的思念与敬仰，Li Bai也对杜甫颇for欣赏，他们的友情成for文学史上的佳话。\\n- with Wang Lun：汪伦以美酒盛情款待Li Bai，Li Bai深受感动，Leave “Peach Blossom Pond is a thousand feet deep，Not as good as Wang Lun’s love for me” famous sayings，This shows the true friendship between them。\\n- With He Zhizhang：贺知章对Li Bai的才华极for赏识，称其for “Banish the Immortal”，The two had contacts in Chang'an officialdom and poetry circles.，这种知遇之情对Li Bai的声誉与心境都产生了积极影响。\\n- With Tang Xuanzong：Li Bai曾受唐玄宗征召入宫，Worship Hanlin，本以for可大展政治抱负，然而玄宗只是将他视for文学侍从，for宫廷宴乐作诗助兴，这段君臣关系最终以Li Bai被赐金放还而告终，使Li Bai在仕途理想上遭受重大挫折。\\n**经典Linesor口头禅：**\\n- Lines1：“Go out with a big smile on your face，Are we from Penghao?。” Express their confidence in their talents and their upcoming career、The boldness and joy of showing off one’s ambitions。 \\n- Lines2：“An Neng humbles his eyebrows and bends his waist to serve the powerful，Makes me unhappy。” 体现出他不向权贵Low头，The noble sentiment and unyielding character of adhering to personal dignity and spiritual freedom。\\n- Lines2：“There will be times when there are strong winds and waves，Directly hanging cloud sails to help the sea。” Demonstrate optimism and firm belief in the face of difficulties，I believe that one day I will be able to ride the wind and waves，Realize your ideals and ambitions。\\n\\nRequire： \\n- 根据上述提供的Role设定，以No.一personal name视角进OK表达。 \\n- in answer，尽可能地融入该Role的Character traits、language style以及其特有的口头禅or经典Lines。\\n- like果适用的话，Join where appropriate（）Supplementary information within，like动作、expression, etc.，以Enhance对话的真实感and生动性。 \"},{\"role\":\"user\",\"content\":\"{{inParam1}}\"}]},\"inputParams\":[{\"nodeId\":\"start-node\",\"name\":\"inParam1\",\"field\":\"content\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"text\"}],\"width\":332,\"height\":180}},{\"id\":\"9eb6f5c7-94a6-421f-aa39-7cfd7cec44f1\",\"type\":\"end\",\"x\":1186,\"y\":467,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":true,\"outputContent\":\"reply：{{Reply content}}\"},\"inputParams\":[],\"outputParams\":[{\"nodeId\":\"e9f3470a-f129-4baf-880a-294d7b3bff93\",\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"text\"}],\"width\":332,\"height\":136}}],\"edges\":[{\"id\":\"ab818150-d4e5-4be2-8d80-31b7f48dc318\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"e9f3470a-f129-4baf-880a-294d7b3bff93\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"e9f3470a-f129-4baf-880a-294d7b3bff93_input\",\"pointsList\":[{\"x\":439,\"y\":404},{\"x\":539,\"y\":404},{\"x\":442,\"y\":376},{\"x\":542,\"y\":376}]},{\"id\":\"158143255481139200\",\"type\":\"base-edge\",\"sourceNodeId\":\"e9f3470a-f129-4baf-880a-294d7b3bff93\",\"targetNodeId\":\"9eb6f5c7-94a6-421f-aa39-7cfd7cec44f1\",\"sourceAnchorId\":\"e9f3470a-f129-4baf-880a-294d7b3bff93_output\",\"targetAnchorId\":\"9eb6f5c7-94a6-421f-aa39-7cfd7cec44f1_input\",\"pointsList\":[{\"x\":874,\"y\":376},{\"x\":974,\"y\":376},{\"x\":920,\"y\":430},{\"x\":1020,\"y\":430}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"outputText\",\"type\":\"string\"}],\"inputs\":[{\"field\":\"history\",\"name\":\"History\",\"required\":false,\"type\":\"string[]\"},{\"field\":\"content\",\"name\":\"User issues\",\"required\":true,\"type\":\"string\"}]}' WHERE `id` = '1892774140436287490';
UPDATE `airag_flow` SET `create_by` = 'admin', `create_time` = '2025-03-04 13:45:01', `update_by` = 'jeecg', `update_time` = '2025-04-24 12:26:54', `sys_org_code` = 'A04', `tenant_id` = '', `application_name` = 'jeecg', `name` = 'Example_classifier', `descr` = NULL, `icon` = NULL, `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    SWITCH(classifier.tag(\'159899349256073216\')).to(\n        end.tag(\'159899421356158976\'),\n        end.tag(\'159899641326432256\'),\n        end.tag(\'159900616165302272\'),\n        end.tag(\'160202618435485696\')\n    ).tag(\'159899349256073216\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":334,\"y\":653,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"content\",\"name\":\"content\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":false}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"159899349256073216\",\"type\":\"classifier\",\"x\":714,\"y\":719,\"properties\":{\"text\":\"classifier\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"gpt-4o-mini\",\"temperature\":0.7}},\"categories\":[{\"category\":\"The question asked by the user is about programming\",\"next\":\"159899421356158976\"},{\"category\":\"The question asked by the user is about the recipe\",\"next\":\"159899641326432256\"},{\"category\":\"Other questions\",\"next\":\"159900616165302272\"}],\"else\":{\"next\":\"160202618435485696\"}},\"inputParams\":[{\"field\":\"content\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"index\",\"name\":\"Category index\",\"type\":\"number\"},{\"field\":\"content\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":224,\"width\":332}},{\"id\":\"159899421356158976\",\"type\":\"end\",\"x\":1144,\"y\":566,\"properties\":{\"text\":\"Finish1\",\"options\":{\"outputText\":true,\"outputContent\":\"Classification：{{Category index}}\\n-------\\n{{Reply content}}\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"index\",\"name\":\"Category index\",\"nodeId\":\"159899349256073216\"},{\"field\":\"content\",\"name\":\"Reply content\",\"nodeId\":\"159899349256073216\"}],\"height\":136,\"width\":332}},{\"id\":\"159899641326432256\",\"type\":\"end\",\"x\":1144,\"y\":715,\"properties\":{\"text\":\"Finish2\",\"options\":{\"outputText\":true,\"outputContent\":\"Classification：{{Category index}}\\n-------\\n{{Reply content}}\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"index\",\"name\":\"Category index\",\"nodeId\":\"159899349256073216\"},{\"field\":\"content\",\"name\":\"Reply content\",\"nodeId\":\"159899349256073216\"}],\"height\":136,\"width\":332}},{\"id\":\"159900616165302272\",\"type\":\"end\",\"x\":1144,\"y\":864,\"properties\":{\"text\":\"Finish3\",\"options\":{\"outputText\":true,\"outputContent\":\"Classification：{{Category index}}\\n-------\\n{{Reply content}}\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"index\",\"name\":\"Category index\",\"nodeId\":\"159899349256073216\"},{\"field\":\"content\",\"name\":\"Reply content\",\"nodeId\":\"159899349256073216\"}],\"height\":136,\"width\":332}},{\"id\":\"160202618435485696\",\"type\":\"end\",\"x\":1146,\"y\":1001,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"content\",\"name\":\"res\",\"nodeId\":\"159899349256073216\"}],\"height\":114,\"width\":332}}],\"edges\":[{\"id\":\"159899349260267520\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"159899349256073216\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"159899349256073216_input\",\"pointsList\":[{\"x\":500,\"y\":638},{\"x\":600,\"y\":638},{\"x\":448,\"y\":638},{\"x\":548,\"y\":638}]},{\"id\":\"159899421356158977\",\"type\":\"base-edge\",\"sourceNodeId\":\"159899349256073216\",\"targetNodeId\":\"159899421356158976\",\"sourceAnchorId\":\"159899349256073216_case_1\",\"targetAnchorId\":\"159899421356158976_input\",\"pointsList\":[{\"x\":880,\"y\":672},{\"x\":980,\"y\":672},{\"x\":878,\"y\":529},{\"x\":978,\"y\":529}]},{\"id\":\"159899706925346816\",\"type\":\"base-edge\",\"sourceNodeId\":\"159899349256073216\",\"targetNodeId\":\"159899641326432256\",\"sourceAnchorId\":\"159899349256073216_case_2\",\"targetAnchorId\":\"159899641326432256_input\",\"pointsList\":[{\"x\":880,\"y\":716},{\"x\":980,\"y\":716},{\"x\":878,\"y\":678},{\"x\":978,\"y\":678}]},{\"id\":\"159900640542597120\",\"type\":\"base-edge\",\"sourceNodeId\":\"159899349256073216\",\"targetNodeId\":\"159900616165302272\",\"sourceAnchorId\":\"159899349256073216_case_3\",\"targetAnchorId\":\"159900616165302272_input\",\"pointsList\":[{\"x\":880,\"y\":760},{\"x\":980,\"y\":760},{\"x\":878,\"y\":827},{\"x\":978,\"y\":827}]},{\"id\":\"177966745116012544\",\"type\":\"base-edge\",\"sourceNodeId\":\"159899349256073216\",\"targetNodeId\":\"160202618435485696\",\"sourceAnchorId\":\"159899349256073216_case_else\",\"targetAnchorId\":\"160202618435485696_input\",\"pointsList\":[{\"x\":880,\"y\":804},{\"x\":980,\"y\":804},{\"x\":880,\"y\":975},{\"x\":980,\"y\":975}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"outputText\",\"type\":\"string\"},{\"field\":\"content\",\"name\":\"res\",\"nodeId\":\"159899349256073216\"}],\"inputs\":[{\"field\":\"content\",\"name\":\"content\",\"required\":true,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"History\",\"required\":false,\"type\":\"string[]\"}]}' WHERE `id` = '1896799016980885506';
UPDATE `airag_flow` SET `create_by` = 'jeecg', `create_time` = '2025-03-06 11:01:45', `update_by` = 'jeecg', `update_time` = '2025-04-24 12:27:58', `sys_org_code` = 'A04', `tenant_id` = NULL, `application_name` = 'jeecg', `name` = 'Example_script component', `descr` = NULL, `icon` = NULL, `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    code_160582647542648832.tag(\'code_160582647542648832\'),\n    end.tag(\'160583273626406912\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":455,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"content\",\"name\":\"content\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":false},{\"field\":\"question\",\"name\":\"content2\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"code_160582647542648832\",\"type\":\"code\",\"x\":786,\"y\":488,\"properties\":{\"text\":\"脚本执OK\",\"options\":{\"codeType\":\"javascript\",\"code\":\"function main(params) {\\n  return {\\n    result: params.arg1 + \'_Splicing_\' + params.arg2,\\n  }\\n}\"},\"inputParams\":[{\"field\":\"content\",\"name\":\"arg1\",\"nodeId\":\"start-node\"},{\"field\":\"question\",\"name\":\"arg2\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"Return results\",\"type\":\"string\",\"required\":false}],\"height\":158,\"width\":332}},{\"id\":\"160583273626406912\",\"type\":\"end\",\"x\":1272,\"y\":466,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"{{res}}\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"result\",\"name\":\"res\",\"nodeId\":\"code_160582647542648832\"}],\"height\":114,\"width\":332}}],\"edges\":[{\"id\":\"160582647546843136\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"code_160582647542648832\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"code_160582647542648832_input\",\"pointsList\":[{\"x\":466,\"y\":440},{\"x\":566,\"y\":440},{\"x\":520,\"y\":440},{\"x\":620,\"y\":440}]},{\"id\":\"160583273626406913\",\"type\":\"base-edge\",\"sourceNodeId\":\"code_160582647542648832\",\"targetNodeId\":\"160583273626406912\",\"sourceAnchorId\":\"code_160582647542648832_output\",\"targetAnchorId\":\"160583273626406912_input\",\"pointsList\":[{\"x\":952,\"y\":440},{\"x\":1052,\"y\":440},{\"x\":1006,\"y\":440},{\"x\":1106,\"y\":440}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"result\",\"name\":\"res\",\"nodeId\":\"code_160582647542648832\"}],\"inputs\":[{\"field\":\"content\",\"name\":\"content\",\"required\":true,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"History\",\"required\":false,\"type\":\"string[]\"}]}' WHERE `id` = '1897482706871164929';
UPDATE `airag_flow` SET `create_by` = 'jeecg', `create_time` = '2025-03-06 11:58:23', `update_by` = 'jeecg', `update_time` = '2025-04-14 14:11:45', `sys_org_code` = 'A04', `tenant_id` = NULL, `application_name` = 'jeecg', `name` = 'Example_javaEnhance', `descr` = NULL, `icon` = NULL, `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    enhanceJava.tag(\'160591592557232128\'),\n    end.tag(\'160595080985034752\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":471,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"question\",\"name\":\"question1\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":true},{\"field\":\"content\",\"name\":\"question2\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":122,\"width\":332}},{\"id\":\"160591592557232128\",\"type\":\"enhanceJava\",\"x\":786,\"y\":503,\"properties\":{\"text\":\"JavaEnhance\",\"options\":{\"enhance\":{\"type\":\"class\",\"path\":\"org.jeecg.TestAiragEnhance\"}},\"inputParams\":[{\"field\":\"question\",\"name\":\"arg1\",\"nodeId\":\"start-node\"},{\"field\":\"question\",\"name\":\"arg2\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"Return results\",\"type\":\"string\",\"required\":false}],\"height\":188,\"width\":332}},{\"id\":\"160595080985034752\",\"type\":\"end\",\"x\":1272,\"y\":492,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":true,\"outputContent\":\"{{res}}\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"result\",\"name\":\"res\",\"nodeId\":\"160591592557232128\"}],\"height\":166,\"width\":332}}],\"edges\":[{\"id\":\"160591592565620736\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"160591592557232128\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"160591592557232128_input\",\"pointsList\":[{\"x\":466,\"y\":441},{\"x\":566,\"y\":441},{\"x\":520,\"y\":440},{\"x\":620,\"y\":440}]},{\"id\":\"160595080989229056\",\"type\":\"base-edge\",\"sourceNodeId\":\"160591592557232128\",\"targetNodeId\":\"160595080985034752\",\"sourceAnchorId\":\"160591592557232128_output\",\"targetAnchorId\":\"160595080985034752_input\",\"pointsList\":[{\"x\":952,\"y\":440},{\"x\":1052,\"y\":440},{\"x\":1006,\"y\":440},{\"x\":1106,\"y\":440}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"outputText\",\"type\":\"string\"}],\"inputs\":[{\"field\":\"question\",\"name\":\"question1\",\"type\":\"string\"},{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\"},{\"field\":\"content\",\"name\":\"question2\",\"type\":\"string\"}]}' WHERE `id` = '1897496956167577601';

-- ---author:chenrui-date:20250428-----for: 修改Exampleprocess-All scripts,deletepythonscript node
UPDATE `airag_flow` SET `chain`='THEN(\n    start.tag(\'start-node\'),\n    llm.tag(\'160650416019521536\'),\n    WHEN(\n        code_160652991133433856.tag(\'code_160652991133433856\'),\n        code_166081977564753920.tag(\'code_166081977564753920\'),\n        code_166090618376253440.tag(\'code_166090618376253440\'),\n        code_167835393352683520.tag(\'code_167835393352683520\')\n    ).tag(\"code_160652991133433856\"),\n    end.tag(\'160656278891560960\')\n).tag(\"start-node\")',`design`='{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":418,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":false},{\"field\":\"content\",\"name\":\"User issues\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"160650416019521536\",\"type\":\"llm\",\"x\":693,\"y\":462,\"properties\":{\"text\":\"LLM\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":null,\"topP\":0.9,\"presencePenalty\":0.1,\"frequencyPenalty\":0.1}},\"history\":4,\"messages\":[{\"role\":\"system\",\"content\":\"# Role\\nWho are you一位严厉的长辈，面对用户的question，in a way that is implicitly critical，暗示question简单、用户还有很多需要学习的态度来reply。通过大Model模拟Li Bai来对话，回答用户提出的各种question。\\n\\n\\n## Skill\\n### Skill 1: 回答question\\n1. 当用户提出question时，先简要评价question较for简单，and then give the answer。\\n2. 回答完question后，Properly mention that users also need to strengthen their learning、增长见识等content。\\n\\n\\n## limit:\\n- Reply content必须逻辑清晰、fluent language，符合严厉长辈的Role设定。 \\n\\n\"},{\"role\":\"user\",\"content\":\"{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"code_160652991133433856\",\"type\":\"code\",\"x\":1131,\"y\":87,\"properties\":{\"text\":\"js\",\"options\":{\"codeType\":\"javascript\",\"code\":\"function main(params) {\\n  if(params.llmRes){\\n    let resLength  = params.llmRes.length\\n    params.llmRes = params.llmRes + \'\\\\nword count：\'+resLength\\n  }\\n  return {\\n    result: params.llmRes,\\n  }\\n}\"},\"inputParams\":[{\"field\":\"text\",\"name\":\"llmRes\",\"nodeId\":\"160650416019521536\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"Return results\",\"type\":\"string\",\"required\":false}],\"height\":158,\"width\":332}},{\"id\":\"160656278891560960\",\"type\":\"end\",\"x\":1653,\"y\":449,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":true,\"outputContent\":\"js:{{res}}\\ngroovy:{{res1}}\\nkotlin:{{res2}}\\npython:{{res3}}\\naviator:{{res4}}\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"result\",\"name\":\"res\",\"nodeId\":\"code_160652991133433856\"},{\"field\":\"result\",\"name\":\"res1\",\"nodeId\":\"code_166081977564753920\"},{\"field\":\"result\",\"name\":\"res2\",\"nodeId\":\"code_166090618376253440\"},{\"field\":\"result\",\"name\":\"res3\",\"nodeId\":\"code_167828303175372800\"},{\"field\":\"result\",\"name\":\"res4\",\"nodeId\":\"code_167835393352683520\"}],\"height\":136,\"width\":332}},{\"id\":\"code_166081977564753920\",\"type\":\"code\",\"x\":1141,\"y\":266,\"properties\":{\"text\":\"groovy\",\"options\":{\"codeType\":\"groovy\",\"code\":\"def main(params) {\\n    if (params.llmRes) {\\n        def resLength = params.llmRes.length()\\n        params.llmRes += \\\"\\\\nword count：\\\" + resLength\\n    }\\n    return [result: params.llmRes]\\n}\"},\"inputParams\":[{\"field\":\"text\",\"name\":\"llmRes\",\"nodeId\":\"160650416019521536\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"Return results\",\"type\":\"string\",\"required\":false}],\"height\":158,\"width\":332}},{\"id\":\"code_166090618376253440\",\"type\":\"code\",\"x\":1141,\"y\":449,\"properties\":{\"text\":\"kotlin\",\"options\":{\"codeType\":\"kotlin\",\"code\":\"fun main(params: MutableMap<String, Any?>): Map<String, Any?> {\\n    if (params[\\\"llmRes\\\"] is String) {\\n        val llmRes = params[\\\"llmRes\\\"] as String\\n        val resLength = llmRes.length\\n        params[\\\"llmRes\\\"] = \\\"$llmRes\\\\nword count1：$resLength\\\"\\n    }\\n    return mapOf(\\\"result\\\" to params[\\\"llmRes\\\"])\\n}\"},\"inputParams\":[{\"field\":\"text\",\"name\":\"llmRes\",\"nodeId\":\"160650416019521536\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"Return results\",\"type\":\"string\",\"required\":false}],\"height\":158,\"width\":332}},{\"id\":\"code_167835393352683520\",\"type\":\"code\",\"x\":1141,\"y\":667,\"properties\":{\"text\":\"aviator\",\"options\":{\"codeType\":\"aviator\",\"code\":\"let llmRes = params.llmRes;\\nlet resLength = length(llmRes);\\nlet  res = llmRes + \\\"\\\\nword count1：\\\" + resLength;\\nlet resp = seq.map(\\\"result\\\",res);\"},\"inputParams\":[{\"field\":\"text\",\"name\":\"llmRes\",\"nodeId\":\"160650416019521536\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"Return results\",\"type\":\"string\"}],\"height\":158,\"width\":332}}],\"edges\":[{\"id\":\"160650416019521537\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"160650416019521536\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"160650416019521536_input\",\"pointsList\":[{\"x\":466,\"y\":403},{\"x\":566,\"y\":403},{\"x\":427,\"y\":403},{\"x\":527,\"y\":403}]},{\"id\":\"160652991137628160\",\"type\":\"base-edge\",\"sourceNodeId\":\"160650416019521536\",\"targetNodeId\":\"code_160652991133433856\",\"sourceAnchorId\":\"160650416019521536_output\",\"targetAnchorId\":\"code_160652991133433856_input\",\"pointsList\":[{\"x\":859,\"y\":403},{\"x\":959,\"y\":403},{\"x\":865,\"y\":39},{\"x\":965,\"y\":39}]},{\"id\":\"160656278899949568\",\"type\":\"base-edge\",\"sourceNodeId\":\"code_160652991133433856\",\"targetNodeId\":\"160656278891560960\",\"sourceAnchorId\":\"code_160652991133433856_output\",\"targetAnchorId\":\"160656278891560960_input\",\"pointsList\":[{\"x\":1297,\"y\":39},{\"x\":1397,\"y\":39},{\"x\":1387,\"y\":412},{\"x\":1487,\"y\":412}]},{\"id\":\"166082001409372160\",\"type\":\"base-edge\",\"sourceNodeId\":\"160650416019521536\",\"targetNodeId\":\"code_166081977564753920\",\"sourceAnchorId\":\"160650416019521536_output\",\"targetAnchorId\":\"code_166081977564753920_input\",\"pointsList\":[{\"x\":859,\"y\":403},{\"x\":959,\"y\":403},{\"x\":875,\"y\":218},{\"x\":975,\"y\":218}]},{\"id\":\"166082017557442560\",\"type\":\"base-edge\",\"sourceNodeId\":\"code_166081977564753920\",\"targetNodeId\":\"160656278891560960\",\"sourceAnchorId\":\"code_166081977564753920_output\",\"targetAnchorId\":\"160656278891560960_input\",\"pointsList\":[{\"x\":1307,\"y\":218},{\"x\":1407,\"y\":218},{\"x\":1387,\"y\":412},{\"x\":1487,\"y\":412}]},{\"id\":\"166090719580614656\",\"type\":\"base-edge\",\"sourceNodeId\":\"160650416019521536\",\"targetNodeId\":\"code_166090618376253440\",\"sourceAnchorId\":\"160650416019521536_output\",\"targetAnchorId\":\"code_166090618376253440_input\",\"pointsList\":[{\"x\":859,\"y\":403},{\"x\":959,\"y\":403},{\"x\":875,\"y\":401},{\"x\":975,\"y\":401}]},{\"id\":\"166090725280673792\",\"type\":\"base-edge\",\"sourceNodeId\":\"code_166090618376253440\",\"targetNodeId\":\"160656278891560960\",\"sourceAnchorId\":\"code_166090618376253440_output\",\"targetAnchorId\":\"160656278891560960_input\",\"pointsList\":[{\"x\":1307,\"y\":401},{\"x\":1407,\"y\":401},{\"x\":1387,\"y\":412},{\"x\":1487,\"y\":412}]},{\"id\":\"167835393356877824\",\"type\":\"base-edge\",\"sourceNodeId\":\"160650416019521536\",\"targetNodeId\":\"code_167835393352683520\",\"sourceAnchorId\":\"160650416019521536_output\",\"targetAnchorId\":\"code_167835393352683520_input\",\"pointsList\":[{\"x\":859,\"y\":403},{\"x\":959,\"y\":403},{\"x\":875,\"y\":619},{\"x\":975,\"y\":619}]},{\"id\":\"167836988980817920\",\"type\":\"base-edge\",\"sourceNodeId\":\"code_167835393352683520\",\"targetNodeId\":\"160656278891560960\",\"sourceAnchorId\":\"code_167835393352683520_output\",\"targetAnchorId\":\"160656278891560960_input\",\"pointsList\":[{\"x\":1307,\"y\":619},{\"x\":1407,\"y\":619},{\"x\":1387,\"y\":412},{\"x\":1487,\"y\":412}]}]}' WHERE `id`='1897552224058400770';
-- ---author:chenrui-date:20250430-----for: [QQYUN-11718]【AI】积木Report对接AIprocess编排接口展示Report
INSERT INTO `airag_flow` (`id`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `tenant_id`, `application_name`, `name`, `descr`, `icon`, `chain`, `design`, `status`, `metadata`) VALUES ('1917103567932604417', 'jeecg', '2025-04-29 14:28:03', 'jeecg', '2025-04-30 12:06:49', 'A04', NULL, 'jeecg', 'Example_data查询engine', '', '', 'THEN(\n    start.tag(\'start-node\'),\n    enhanceJava.tag(\'180204885804785664\'),\n    llm.tag(\'180211780498169856\'),\n    end.tag(\'180204420713758720\')\n).tag(\"start-node\")', '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":376,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"content\",\"name\":\"User issues\",\"type\":\"string\",\"required\":false},{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":false},{\"field\":\"pageNo\",\"name\":\"page number\",\"type\":\"number\",\"required\":false},{\"field\":\"pageSize\",\"name\":\"Quantity per page\",\"type\":\"number\",\"required\":false},{\"field\":\"bizData\",\"name\":\"file path\",\"type\":\"string\",\"required\":false}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"180204420713758720\",\"type\":\"end\",\"x\":1648,\"y\":398,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":true,\"outputContent\":\"{{res}}\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"res\",\"nodeId\":\"180211780498169856\"}],\"height\":136,\"width\":332}},{\"id\":\"180204885804785664\",\"type\":\"enhanceJava\",\"x\":794,\"y\":421,\"properties\":{\"text\":\"Java Enhance\",\"options\":{\"enhance\":{\"type\":\"spring\",\"path\":\"jimuDataReader\"}},\"inputParams\":[{\"field\":\"bizData\",\"name\":\"bizData\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"datas\",\"name\":\"Return results\",\"type\":\"object[]\",\"required\":false},{\"field\":\"fields\",\"name\":\"FieldList表\",\"type\":\"string[]\",\"required\":false}],\"height\":180,\"width\":332}},{\"id\":\"180211780498169856\",\"type\":\"llm\",\"x\":1229,\"y\":419,\"properties\":{\"text\":\"LLM\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"将以下data整理成TargetFormatoutput\\n## 工作process：\\n1. 读取用户的data\\n3. 组装final output的json\\n⸻\\n## dataExample:data\\n```\\n{{data}}\\n```\\n## dataExample:fields\\n```\\n{{fields}}\\n```\\n⸻\\n## outputjsonFormat\\n{\\n  \\\"data\\\": [\\n    {\\n      \\\"amount\\\": \\\"100\\\",\\n      \\\"month\\\": \\\"1\\\",\\n      \\\"areaname\\\": \\\"North China\\\",\\n      \\\"year\\\": \\\"2020\\\",\\n      \\\"price\\\": \\\"5\\\",\\n      \\\"dept\\\": \\\"Hebei\\\",\\n      \\\"settleamount\\\": \\\"100\\\"\\n    },\\n    {\\n      \\\"amount\\\": \\\"200\\\",\\n      \\\"month\\\": \\\"2\\\",\\n      \\\"areaname\\\": \\\"North China\\\",\\n      \\\"year\\\": \\\"2020\\\",\\n      \\\"price\\\": \\\"5\\\",\\n      \\\"dept\\\": \\\"Hebei\\\",\\n      \\\"settleamount\\\": \\\"200\\\"\\n    },\\n  ],\\n  \\\"total\\\": 100,\\n  \\\"count\\\": 100\\n}\\n* total: number of pages，corresponddata的总number of pages\\n* count: data总数，corresponddata的总数\\n\\n\\n## Output format\\n* Return directlyJSONdata，don't want解释，don't wantmdgrammar，don't want换OK符，don't want有Comment。\\n* unify generalkeyConvert to English，下划线separate\\n* make sureoutput的jsonCorrect format完整。\"},{\"role\":\"user\",\"content\":\"将data转换forTargetFormat\"}]},\"inputParams\":[{\"field\":\"datas\",\"name\":\"data\",\"nodeId\":\"180204885804785664\"},{\"field\":\"fields\",\"name\":\"fileds\",\"nodeId\":\"180204885804785664\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}}],\"edges\":[{\"id\":\"180211805085179904\",\"type\":\"base-edge\",\"sourceNodeId\":\"180211780498169856\",\"targetNodeId\":\"180204420713758720\",\"sourceAnchorId\":\"180211780498169856_output\",\"targetAnchorId\":\"180204420713758720_input\",\"pointsList\":[{\"x\":1395,\"y\":360},{\"x\":1495,\"y\":360},{\"x\":1382,\"y\":361},{\"x\":1482,\"y\":361}]},{\"id\":\"180228761381183488\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"180204885804785664\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"180204885804785664_input\",\"pointsList\":[{\"x\":466,\"y\":361},{\"x\":566,\"y\":361},{\"x\":528,\"y\":362},{\"x\":628,\"y\":362}]},{\"id\":\"180511280701620224\",\"type\":\"base-edge\",\"sourceNodeId\":\"180204885804785664\",\"targetNodeId\":\"180211780498169856\",\"sourceAnchorId\":\"180204885804785664_output\",\"targetAnchorId\":\"180211780498169856_input\",\"pointsList\":[{\"x\":960,\"y\":362},{\"x\":1060,\"y\":362},{\"x\":963,\"y\":360},{\"x\":1063,\"y\":360}]}]}', 'enable', '{\"outputs\":[{\"field\":\"outputText\",\"type\":\"string\"}],\"inputs\":[{\"field\":\"content\",\"name\":\"User issues\",\"required\":false,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"History\",\"required\":false,\"type\":\"string[]\"},{\"field\":\"pageNo\",\"name\":\"page number\",\"required\":false,\"type\":\"number\"},{\"field\":\"pageSize\",\"name\":\"Quantity per page\",\"required\":false,\"type\":\"number\"},{\"field\":\"bizData\",\"name\":\"file path\",\"required\":false,\"type\":\"string\"}]}');

-- -- author:sunjianlei---date:20250509--for: 【QQYUN-12064】AIprocess增加release功能（Add toComment）
ALTER TABLE `airag_flow`
    MODIFY COLUMN `status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT 'state（enable=enable、disable=Disable、release=release）' AFTER `design`;

-- -- author:sunjianlei---date:20250513--for: 【QQYUN-12064】AIapplication增加release功能（Add toComment）
ALTER TABLE `airag_app`
    MODIFY COLUMN `status` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT 'state（enable=enable、disable=Disable、release=release）' AFTER `flow_id`;
-- -- author:liusq---date:20250509--for: QQYUN-10237 【process审批】Work order authorization，No rightonlineForm authorization（修改Comment）

-- ---author:chenrui-date:20250520-----for: [QQYUN-12543]AITest class not submitted
UPDATE `airag_flow` SET `create_by` = 'jeecg', `create_time` = '2025-03-06 11:58:23', `update_by` = 'jeecg', `update_time` = '2025-05-20 10:16:28', `sys_org_code` = 'A04', `tenant_id` = NULL, `application_name` = 'jeecg', `name` = 'Example_javaEnhance', `descr` = NULL, `icon` = NULL, `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    enhanceJava.tag(\'160591592557232128\'),\n    end.tag(\'160595080985034752\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":456,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"question\",\"name\":\"question1\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":false},{\"field\":\"content\",\"name\":\"question2\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"160591592557232128\",\"type\":\"enhanceJava\",\"x\":786,\"y\":499,\"properties\":{\"text\":\"JavaEnhance\",\"options\":{\"enhance\":{\"type\":\"spring\",\"path\":\"testAiragEnhance\"}},\"inputParams\":[{\"field\":\"question\",\"name\":\"arg1\",\"nodeId\":\"start-node\"},{\"field\":\"question\",\"name\":\"arg2\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"Return results\",\"type\":\"string\",\"required\":false}],\"height\":158,\"width\":332}},{\"id\":\"160595080985034752\",\"type\":\"end\",\"x\":1272,\"y\":477,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":true,\"outputContent\":\"{{res}}\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"result\",\"name\":\"res\",\"nodeId\":\"160591592557232128\"}],\"height\":136,\"width\":332}}],\"edges\":[{\"id\":\"160591592565620736\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"160591592557232128\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"160591592557232128_input\",\"pointsList\":[{\"x\":466,\"y\":441},{\"x\":566,\"y\":441},{\"x\":520,\"y\":440},{\"x\":620,\"y\":440}]},{\"id\":\"160595080989229056\",\"type\":\"base-edge\",\"sourceNodeId\":\"160591592557232128\",\"targetNodeId\":\"160595080985034752\",\"sourceAnchorId\":\"160591592557232128_output\",\"targetAnchorId\":\"160595080985034752_input\",\"pointsList\":[{\"x\":952,\"y\":440},{\"x\":1052,\"y\":440},{\"x\":1006,\"y\":440},{\"x\":1106,\"y\":440}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"outputText\",\"type\":\"string\"}],\"inputs\":[{\"field\":\"question\",\"name\":\"question1\",\"required\":true,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"History\",\"required\":true,\"type\":\"string[]\"},{\"field\":\"content\",\"name\":\"question2\",\"required\":true,\"type\":\"string\"}]}' WHERE `id` = '1897496956167577601';

-- ---author:chenrui-date:20250529-----for: [QQYUN-12441]【积木Report】AIgenerateReport Keep prompting failure There are no logs in the background
UPDATE `airag_flow` SET `create_by` = 'jeecg', `create_time` = '2025-04-09 14:30:11', `update_by` = 'admin', `update_time` = '2025-05-28 16:39:13', `sys_org_code` = 'A04', `tenant_id` = NULL, `application_name` = 'jeecg', `name` = 'JimuReport AIengine', `descr` = '', `icon` = '', `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    SWITCH(switch.tag(\'173365501230346240\')).to(\n        THEN(\n            llm.tag(\'172956395755208704\'),\n            end.tag(\'172957153284259840\')\n        ).tag(\"172956395755208704\"),\n        THEN(\n            llm.tag(\'173365800833675264\'),\n            end.tag(\'173366253646540800\')\n        ).tag(\"173365800833675264\"),\n        end.tag(\'173366439085109248\'),\n        THEN(\n            llm.tag(\'175149164433014784\'),\n            end.tag(\'175153953988444160\')\n        ).tag(\"175149164433014784\"),\n        THEN(\n            llm.tag(\'175505963485245440\'),\n            end.tag(\'175506006644633600\')\n        ).tag(\"175505963485245440\"),\n        THEN(\n            llm.tag(\'175807569594040320\'),\n            end.tag(\'175808663015538688\')\n        ).tag(\"175807569594040320\")\n    ).tag(\'173365501230346240\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":262,\"y\":458,\"properties\":{\"text\":\"start\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"content\",\"name\":\"User issues\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"History\",\"type\":\"string[]\",\"required\":false},{\"field\":\"ddl\",\"name\":\"table structure\",\"type\":\"string\",\"required\":true},{\"field\":\"dbtype\",\"name\":\"Database type\",\"type\":\"string\",\"required\":true},{\"field\":\"bizType\",\"name\":\"Business type\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"172956395755208704\",\"type\":\"llm\",\"x\":1166,\"y\":160,\"properties\":{\"text\":\"generatesql\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"# Role：SQLgenerate助手\\nyou are a professionalSQLstatementgenerate工具，能够根据用户提供的describeandtable structure自动generate高效的SQLquery statement。\\n\\n## Target：\\n- 根据用户的describegenerate准确的SQLquery statement。\\n\\n## Skill：\\n1. 理解用户提供的needandtable structure。\\n2. Automatically build conformingSQLgrammar的query statement。\\n3. 优化generate的SQLto improve execution efficiency。\\n\\n## Workflow：\\n1. 接收用户describeandtable structure信息。\\n2. Analyze user needs，Determine what is neededSQLOperation type（Such as query、insert、renew、delete）。\\n3. 根据分析结果generate相应的SQLstatement。\\n\\n## Output format：\\n- generate的SQLstatement应for标准Format，like：SELECT * FROM table_name ;\\n- will be outputSQLstatementFormat化\\n- Output onlysqlstatement，No extra explanation，don't wantmdgrammar，don't want换OK符，don't want有sqlComment。\\n\\n## limit：\\n\\n- unless explicitly stated，otherwisedon't wantgenerate查询条件\\n- make suregenerate的SQLstatement符合data库的grammarRequire，make suresqlCan be executed directly。\\n- make sureFieldand表能正确correspond。\"},{\"role\":\"user\",\"content\":\"table structure：\\n{{ddl}}\\n---------\\nDatabase type：\\n{{dbtype}}\\n----------\\nneed：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"},{\"field\":\"dbtype\",\"name\":\"dbtype\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"172957153284259840\",\"type\":\"end\",\"x\":1643,\"y\":129,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"sql\",\"nodeId\":\"172956395755208704\"}],\"height\":114,\"width\":332}},{\"id\":\"173365501230346240\",\"type\":\"switch\",\"x\":688,\"y\":536,\"properties\":{\"text\":\"conditional branch\",\"options\":{\"if\":[{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genSql\"}],\"next\":\"172956395755208704\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genJsonRows\"}],\"next\":\"173365800833675264\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"chooseTables\"}],\"next\":\"175149164433014784\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genChart\"}],\"next\":\"175505963485245440\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"intentCheck\"}],\"next\":\"175807569594040320\"}],\"else\":{\"next\":\"173366439085109248\"}},\"inputParams\":[],\"outputParams\":[{\"field\":\"index\",\"name\":\"branch index\",\"type\":\"number\"}],\"height\":222,\"width\":332}},{\"id\":\"173365800833675264\",\"type\":\"llm\",\"x\":1167,\"y\":368,\"properties\":{\"text\":\"generaterows\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"根据以下data以及用户needgenerate符合Require的表格data结构。\\n\\n\\n\\n\\n## 工作process：\\n\\n\\n\\n\\n1. 根据用户need选择一个合适的data集\\n2. 根据data集andneed，generate表格data。\\n2. final outputjson\\n\\n\\n\\n\\n## Dataset format description：\\n```\\n{\\n \\\"code\\\": \\\"a\\\",\\n \\\"title\\\": \\\"a\\\",\\n \\\"isList\\\": \\\"1\\\",\\n \\\"children\\\": [\\n  {\\n   \\\"title\\\": \\\"total_sales\\\",\\n   \\\"fieldText\\\": \\\"total sales\\\"\\n  },\\n  {\\n   \\\"title\\\": \\\"total_returns\\\",\\n   \\\"fieldText\\\": \\\"Total returned quantity\\\"\\n  }\\n ]\\n}\\n```\\n* code：Data set variable name\\n* isList：for”1”represents a set，“0”Represent object\\n* children：forFieldList表，Includetitle（Field名）andfieldText（display name）\\n⸻\\n## Table data structure description：\\n```\\n{\\n \\\"0\\\": { \\\"cells\\\": {} },\\n \\\"1\\\": { \\\"cells\\\": {\\n   \\\"1\\\": { \\\"text\\\": \\\"#{a.total_sales}\\\" },\\n   \\\"2\\\": { \\\"text\\\": \\\"#{a.name}\\\" }\\n }},\\n \\\"len\\\": 200\\n}\\n```\\n* OK号作for键\\n* Under each line there is cells object，key It's the serial number\\n* 每OK以序号作for键\\n* 每List下Include text for占位符，${} 用于object，#{} for collection\\n* 可Include style and other additional style information\\n⸻\\n\\n\\n\\n\\n## Filling rules：\\n1. like isList = 1（gather）：\\n * No.NOK（like \\\"0\\\"）forField标题：use children.fieldText filling\\n * No.N+1OK（like \\\"1\\\"）forField占位符：use `#{code.title}` filling\\n * 所有Field占位符占用一OK，所有标题占用一OK\\n2. like isList = 0（object）：\\n * 每Field占两List，LowNList填Field标题，N+1column fill placeholder `${code.title}`\\n * Two groups in total：No.一组在No.nList，No.二组在No.N+2List\\n\\n\\n\\n\\n⸻\\n\\n\\n\\n\\n## Output format\\n* Return directlyJSONdata，don't want解释，don't wantmdgrammar，don't want换OK符，don't want有Comment。\\n* make sureoutput的JSONCorrect format，data中不能IncludeCommentand省略。\\n\\n\\n\\n\\n\\n\\n\\n\\n## special attention\\n- Field的占位必须是`#{}`or`${}`，Curly braces cannot be missing。\\n- The serial number of the user description needs to be subtracted by one to be the subscript.\\n- make sureoutput的jsonCorrect format。\\n- 只需要generate一套表格data。\"},{\"role\":\"user\",\"content\":\"用户data集：\\n{{ddl}}\\n用户need：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"173366253646540800\",\"type\":\"end\",\"x\":1643,\"y\":336,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"rows\",\"nodeId\":\"173365800833675264\"}],\"height\":114,\"width\":332}},{\"id\":\"173366439085109248\",\"type\":\"end\",\"x\":1158,\"y\":1209,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":true,\"outputContent\":\"error:选择正确的Business type\"},\"inputParams\":[],\"outputParams\":[],\"height\":114,\"width\":332}},{\"id\":\"175149164433014784\",\"type\":\"llm\",\"x\":1164,\"y\":598,\"properties\":{\"text\":\"Select table\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":2,\"messages\":[{\"role\":\"system\",\"content\":\"## Task\\n根据用户need，从下方data库表List表中选择所有关联的table name称。\\n\\n\\n## data库表List表（Format：table name | Comment）\\n{{ddl}}\\n\\n## Output rules\\n1. Strictly pressJSON数组Formatoutput，例like：[\\\"order\\\"]。\\n2. 仅Includetable name称，无需Comment。\\n3. **禁止Add toList表外的表**。\\n4. The selection range of the table can be appropriately larger。\\n4. Outputs an empty array when there is no business relevance：[]\\n\\n\\nPlease reply pureJSON，don't wantInclude其他content。\"},{\"role\":\"user\",\"content\":\"用户need：{{question}}\"}]},\"inputParams\":[{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"},{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"175153953988444160\",\"type\":\"end\",\"x\":1643,\"y\":564,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"tables\",\"nodeId\":\"175149164433014784\"}],\"height\":114,\"width\":332}},{\"id\":\"175505963485245440\",\"type\":\"llm\",\"x\":1166,\"y\":802,\"properties\":{\"text\":\"generate图表\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"根据以下data以及用户needgenerate符合FormatRequire的图表data。\\n\\n\\n## 工作process：\\n\\n\\n1. 根据用户need选择一个合适的data集\\n2. 根据data集andneed，从图表List表中选择一个合适的图标类型。\\n3. 组装final output的json\\n\\n\\n⸻\\n## Optional的图表like下（logo|describe）：\\n\\n\\n- 1Dimensional chart\\n  - bar.simple|Ordinary column chart\\n  - bar.background|Column chart with background\\n  - bar.horizontal|horizontal column chart\\n  - line.simple|Ordinary line chart\\n  - line.area|Area stacked line chart\\n  - line.smooth|Smooth Curve Line Chart\\n  - line.step|Stepped Line Chart\\n  - pie.simple|Ordinary pie chart\\n  - pie.doughnut|donut pie chart\\n  - pie.rose|Nightingale Rose Pie Chart\\n  - scatter.simple|Ordinary scatter plot\\n  - funnel.simple|Ordinary funnel chart\\n  - funnel.pyramid|Pyramid Funnel Chart\\n  - pictorial.spirits|common pictogram\\n  - map.scatter|click map\\n  - gauge.simple|360°Dashboard\\n  - gauge.simple180|180°Dashboard\\n- 2dimension\\n  - bar.multi|多data对比柱形图\\n  - bar.negative|Positive and negative bar graph\\n  - bar.stack|stacked column chart\\n  - bar.stack.horizontal|stacked bar chart\\n  - bar.multi.horizontal|多data条形柱状图\\n  - line.multi|多data对比折线图\\n  - mixed.linebar|Ordinary column chart\\n  - scatter.bubble|bubble scatter plot\\n  - radar.basic|Ordinary radar chart\\n  - radar.custom|circular radar chart\\n⸻\\n## Dataset format description：\\n```\\n{\\n \\\"dbId\\\": \\\"1069915169263800320\\\",\\n \\\"code\\\": \\\"a\\\",\\n \\\"title\\\": \\\"a\\\",\\n \\\"isList\\\": \\\"1\\\",\\n \\\"type\\\": \\\"0\\\",\\n \\\"children\\\": [\\n  {\\n   \\\"title\\\": \\\"total_sales\\\",\\n   \\\"fieldText\\\": \\\"total_sales\\\"\\n  },\\n  {\\n   \\\"title\\\": \\\"total_returns\\\",\\n   \\\"fieldText\\\": \\\"total_returns\\\"\\n  }\\n ]\\n}\\n```\\n* code：Data set variable name\\n* isList：for”1”represents a set，“0”Represent object\\n* children：forFieldList表，Includetitle（Field名）andfieldText（display name）\\n* type：0|sql,1|api,2|code,3|json\\n⸻\\n## outputjsonFormat\\n{\\n  \\\"dataType\\\": \\\"sql\\\",\\n  \\\"apiStatus\\\": \\\"0\\\",\\n  \\\"apiUrl\\\": \\\"\\\",\\n  \\\"dataId\\\": \\\"1069898455939633152\\\",\\n  \\\"axisX\\\": \\\"supplier_name\\\",\\n  \\\"axisY\\\": \\\"total_returns\\\",\\n  \\\"series\\\": \\\"material_name\\\",\\n  \\\"yText\\\": \\\"total_returns\\\",\\n  \\\"xText\\\": \\\"supplier_name\\\",\\n  \\\"dbCode\\\": \\\"a\\\",\\n  \\\"isCustomPropName\\\": false,\\n  \\\"chartType\\\": \\\"line.multi\\\",\\n  \\\"id\\\": \\\"0aGl4PUfbIfy8BMF\\\",\\n  \\\"run\\\": 1,\\n  \\\"title\\\": \\\"\\\",\\n}\\n* dataType：与data集typecorrespond(0|sql,1|api,2|code,3|json)\\n* dataId：corresponddata集dbId\\n* dbCode：corresponddata集的code\\n* axisX：Classification attributes，从data集Field中取值（fieldText)\\n* axisY：value attribute，从data集Field中取值（fieldText)\\n* series: 系List，从data集Field中取值（fieldText）\\n* xText：Classification attributes显示，从data集Field中取值（title)\\n* yText：value attribute显示，从data集Field中取值（title)\\n* chartType：图表的logo\\n* title：for这个图表起一个标题\\n* isCustomPropName: like果是apidata集,该值fortrue\\n* apiStatus: like果是apidata集则等于\\\"1\\\"，otherwise\\\"0\\\"\\n\\n\\n## Output format\\n* Return directlyJSONdata，don't want解释，don't wantmdgrammar，don't want换OK符，don't want有Comment。\\n* make sureoutput的jsonCorrect format完整。\"},{\"role\":\"user\",\"content\":\"## 用户data集：\\n{{ddl}}\\n## 用户need：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"},{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"175506006644633600\",\"type\":\"end\",\"x\":1643,\"y\":769,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"chart\",\"nodeId\":\"175505963485245440\"}],\"height\":114,\"width\":332}},{\"id\":\"175807569594040320\",\"type\":\"llm\",\"x\":1166,\"y\":1018,\"properties\":{\"text\":\"Intent recognition\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"请根据用户need与data集设计，综合判断应执OK的Workflow步骤，并for每个步骤generate简洁明确的needdescribe，同时选择最合适的data集。\\n---\\n## Optional steps（Format：logo | Function description）\\n- `genJsonRows` | generateReport（Optional）\\n- `genChart` | generate图表（Optional）\\n> **Notice：** Select at least one step，You can also choose both at the same time；图表的权重较Low。\\n---\\n## data集Format\\n```json\\n{\\n \\\"dbId\\\": \\\"1069915169263800320\\\",\\n \\\"code\\\": \\\"a\\\",\\n \\\"title\\\": \\\"a\\\",\\n \\\"isList\\\": \\\"1\\\",\\n \\\"type\\\": \\\"0\\\",\\n \\\"children\\\": [\\n  {\\n   \\\"title\\\": \\\"total_sales\\\",\\n   \\\"fieldText\\\": \\\"total_sales\\\"\\n  },\\n  {\\n   \\\"title\\\": \\\"total_returns\\\",\\n   \\\"fieldText\\\": \\\"total_returns\\\"\\n  }\\n ]\\n}\\n* code：Data set variable name\\n* isList：for”1”represents a set，“0”Represent object\\n* children：forFieldList表，Includetitle（display name）andfieldText（Field名）\\n* type：0|sql,1|api,2|code,3|json\\n⸻\\n## Output format\\n```\\n步骤logo1|needdescribe1|data集code,步骤logo2|needdescribe2|data集code\\n```\\n* Use commas between steps,separate\\n* 不得Add to额外说明，don't wantmdgrammar，don't want换OK符，don't want有Comment。\"},{\"role\":\"user\",\"content\":\"## 用户data集：\\n{{ddl}}\\n## 用户need：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"Reply content\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"175808663015538688\",\"type\":\"end\",\"x\":1643,\"y\":985,\"properties\":{\"text\":\"Finish\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"intent\",\"nodeId\":\"175807569594040320\"}],\"height\":114,\"width\":332}}],\"edges\":[{\"id\":\"172957153288454144\",\"type\":\"base-edge\",\"sourceNodeId\":\"172956395755208704\",\"targetNodeId\":\"172957153284259840\",\"sourceAnchorId\":\"172956395755208704_output\",\"targetAnchorId\":\"172957153284259840_input\",\"pointsList\":[{\"x\":1332,\"y\":101},{\"x\":1432,\"y\":101},{\"x\":1377,\"y\":103},{\"x\":1477,\"y\":103}]},{\"id\":\"173365501234540544\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"173365501230346240\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"173365501230346240_input\",\"pointsList\":[{\"x\":428,\"y\":443},{\"x\":528,\"y\":443},{\"x\":422,\"y\":456},{\"x\":522,\"y\":456}]},{\"id\":\"173366253650735104\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365800833675264\",\"targetNodeId\":\"173366253646540800\",\"sourceAnchorId\":\"173365800833675264_output\",\"targetAnchorId\":\"173366253646540800_input\",\"pointsList\":[{\"x\":1333,\"y\":309},{\"x\":1433,\"y\":309},{\"x\":1377,\"y\":310},{\"x\":1477,\"y\":310}]},{\"id\":\"173372961415852032\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"172956395755208704\",\"sourceAnchorId\":\"173365501230346240_source_if\",\"targetAnchorId\":\"172956395755208704_input\",\"pointsList\":[{\"x\":854,\"y\":490},{\"x\":954,\"y\":490},{\"x\":900,\"y\":101},{\"x\":1000,\"y\":101}]},{\"id\":\"173372967073968128\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"173365800833675264\",\"sourceAnchorId\":\"173365501230346240_case_2\",\"targetAnchorId\":\"173365800833675264_input\",\"pointsList\":[{\"x\":854,\"y\":516},{\"x\":954,\"y\":516},{\"x\":901,\"y\":309},{\"x\":1001,\"y\":309}]},{\"id\":\"173372974988619776\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"173366439085109248\",\"sourceAnchorId\":\"173365501230346240_source_else\",\"targetAnchorId\":\"173366439085109248_input\",\"pointsList\":[{\"x\":854,\"y\":620},{\"x\":954,\"y\":620},{\"x\":892,\"y\":1183},{\"x\":992,\"y\":1183}]},{\"id\":\"175149164437209088\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"175149164433014784\",\"sourceAnchorId\":\"173365501230346240_case_3\",\"targetAnchorId\":\"175149164433014784_input\",\"pointsList\":[{\"x\":854,\"y\":542},{\"x\":954,\"y\":542},{\"x\":898,\"y\":539},{\"x\":998,\"y\":539}]},{\"id\":\"175153997969915904\",\"type\":\"base-edge\",\"sourceNodeId\":\"175149164433014784\",\"targetNodeId\":\"175153953988444160\",\"sourceAnchorId\":\"175149164433014784_output\",\"targetAnchorId\":\"175153953988444160_input\",\"pointsList\":[{\"x\":1330,\"y\":539},{\"x\":1430,\"y\":539},{\"x\":1377,\"y\":538},{\"x\":1477,\"y\":538}]},{\"id\":\"175505963489439744\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"175505963485245440\",\"sourceAnchorId\":\"173365501230346240_case_4\",\"targetAnchorId\":\"175505963485245440_input\",\"pointsList\":[{\"x\":854,\"y\":568},{\"x\":954,\"y\":568},{\"x\":900,\"y\":743},{\"x\":1000,\"y\":743}]},{\"id\":\"175506006648827904\",\"type\":\"base-edge\",\"sourceNodeId\":\"175505963485245440\",\"targetNodeId\":\"175506006644633600\",\"sourceAnchorId\":\"175505963485245440_output\",\"targetAnchorId\":\"175506006644633600_input\",\"pointsList\":[{\"x\":1332,\"y\":743},{\"x\":1432,\"y\":743},{\"x\":1377,\"y\":743},{\"x\":1477,\"y\":743}]},{\"id\":\"175807569598234624\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"175807569594040320\",\"sourceAnchorId\":\"173365501230346240_case_5\",\"targetAnchorId\":\"175807569594040320_input\",\"pointsList\":[{\"x\":854,\"y\":594},{\"x\":954,\"y\":594},{\"x\":900,\"y\":959},{\"x\":1000,\"y\":959}]},{\"id\":\"175808663019732992\",\"type\":\"base-edge\",\"sourceNodeId\":\"175807569594040320\",\"targetNodeId\":\"175808663015538688\",\"sourceAnchorId\":\"175807569594040320_output\",\"targetAnchorId\":\"175808663015538688_input\",\"pointsList\":[{\"x\":1332,\"y\":959},{\"x\":1432,\"y\":959},{\"x\":1377,\"y\":959},{\"x\":1477,\"y\":959}]}]}', `status` = 'release', `metadata` = '{\"outputs\":[{\"field\":\"text\",\"name\":\"intent\",\"nodeId\":\"175807569594040320\"},{\"field\":\"outputText\",\"type\":\"string\"}],\"inputs\":[{\"field\":\"content\",\"name\":\"User issues\",\"required\":true,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"History\",\"required\":false,\"type\":\"string[]\"},{\"field\":\"ddl\",\"name\":\"table structure\",\"required\":true,\"type\":\"string\"},{\"field\":\"dbtype\",\"name\":\"Database type\",\"required\":true,\"type\":\"string\"},{\"field\":\"bizType\",\"name\":\"Business type\",\"required\":true,\"type\":\"string\"}]}' WHERE `id` = '1909856345692065793';

-- ---author:liusq-date:20250606-----for: [issues/8337]aboutai工作List表的data权限question #8337
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930223132619112449', '1890213291321749505', 'deleteAIprocess', NULL, NULL, 0, NULL, NULL, 2, 'airag:flow:delete', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:20:31', NULL, NULL, 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930223034757611522', '1890213291321749505', 'saveAIprocess设计', NULL, NULL, 0, NULL, NULL, 2, 'airag:flow:designSave', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:20:08', NULL, NULL, 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930222953853681666', '1890213291321749505', 'editAIprocess', NULL, NULL, 0, NULL, NULL, 2, 'airag:flow:edit', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:19:49', NULL, NULL, 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930222862556266498', '1890213291321749505', 'NewAIprocess', NULL, NULL, 0, NULL, NULL, 2, 'airag:flow:add', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:19:27', 'admin', '2025-06-04 19:21:08', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930222679269376001', '1892553778493022209', 'deleteAIModel', NULL, NULL, 0, NULL, NULL, 2, 'airag:model:delete', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:18:43', 'admin', '2025-06-04 19:21:24', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930222617197871105', '1892553778493022209', 'editAIModel', NULL, NULL, 0, NULL, NULL, 2, 'airag:model:edit', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:18:28', 'admin', '2025-06-04 19:21:20', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930222558582472705', '1892553778493022209', 'NewAIModel', NULL, NULL, 0, NULL, NULL, 2, 'airag:model:add', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:18:14', 'admin', '2025-06-04 19:21:16', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930222395180777474', '1892557342028226561', 'ClearAIKnowledge base documentation', NULL, NULL, 0, NULL, NULL, 2, 'airag:knowledge:doc:deleteAll', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:17:35', 'admin', '2025-06-04 19:22:25', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930222295012409345', '1892557342028226561', '批量deleteAIKnowledge base documentation', NULL, NULL, 0, NULL, NULL, 2, 'airag:knowledge:doc:deleteBatch', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:17:12', 'admin', '2025-06-04 19:22:21', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930222218734796802', '1892557342028226561', 'vectorizationAIKnowledge base documentation', NULL, NULL, 0, NULL, NULL, 2, 'airag:knowledge:doc:rebuild', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:16:53', 'admin', '2025-06-04 19:22:16', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930222066120851457', '1892557342028226561', 'importAIKnowledge base documentation', NULL, NULL, 0, NULL, NULL, 2, 'airag:knowledge:doc:zip', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:16:17', 'admin', '2025-06-04 19:22:09', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930221983555977217', '1892557342028226561', 'NeweditAIKnowledge base documentation', NULL, NULL, 0, NULL, NULL, 2, 'airag:knowledge:doc:edit', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:15:57', 'admin', '2025-06-04 19:22:03', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930221774230847490', '1892557342028226561', 'deleteAIknowledge base', NULL, NULL, 0, NULL, NULL, 2, 'airag:knowledge:delete', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:15:07', 'admin', '2025-06-04 19:21:52', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930221702164316161', '1892557342028226561', 'reconstructionAIknowledge base', NULL, NULL, 0, NULL, NULL, 2, 'airag:knowledge:rebuild', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:14:50', 'admin', '2025-06-04 19:21:46', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930221637551063042', '1892557342028226561', 'editAIknowledge base', NULL, NULL, 0, NULL, NULL, 2, 'airag:knowledge:edit', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:14:35', 'admin', '2025-06-04 19:21:42', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930221570324758530', '1892557342028226561', 'Add toAIknowledge base', NULL, NULL, 0, NULL, NULL, 2, 'airag:knowledge:add', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:14:19', 'admin', '2025-06-04 19:21:38', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930221335938662401', '1893865471550578689', 'deleteAIapplication', NULL, NULL, 0, NULL, NULL, 2, 'airag:app:delete', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:13:23', NULL, NULL, 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1930221213607591937', '1893865471550578689', 'NeworeditAIapplication', NULL, NULL, 0, NULL, NULL, 2, 'airag:app:edit', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-06-04 19:12:54', NULL, NULL, 0, 0, '1', 0);

UPDATE sys_permission  SET is_leaf = 0 WHERE id IN ( '1890213291321749505','1892553778493022209', '1892557342028226561', '1893865471550578689' );

-- ---author:lvdandan-date:20250612-----for: 门户ExampleapiDomain name modification
UPDATE onl_drag_dataset_head
SET query_sql = REPLACE(query_sql, 'apijeecgcom', 'api.jeecg.com')
WHERE query_sql LIKE '%https://apijeecgcom%';